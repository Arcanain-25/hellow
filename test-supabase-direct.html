<!DOCTYPE html>
<html>
<head>
    <title>Test Supabase Direct</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>–¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase</h1>
    
    <div>
        <input type="email" id="email" placeholder="Email" value="newuser@example.com">
        <input type="password" id="password" placeholder="Password" value="123456">
        <button onclick="testSignUp()">Test SignUp</button>
        <button onclick="testSignIn()">Test SignIn</button>
        <button onclick="checkUser()">Check Current User</button>
    </div>
    
    <div id="result"></div>

    <script>
        const supabaseUrl = 'https://mcdhnxkzsbcifsaijieu.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1jZGhueGt6c2JjaWZzYWlqaWV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc4ODEwOTAsImV4cCI6MjA3MzQ1NzA5MH0.njdhv1MANZ0K1EFTsfAl61F38aVxspkgtbNo2GGZUYY';
        
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
        
        async function testSignUp() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.innerHTML = '–¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é...';
            
            try {
                console.log('–ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', { email, password });
                
                const { data, error } = await supabase.auth.signUp({
                    email: email,
                    password: password
                });
                
                console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', { data, error });
                
                if (error) {
                    resultDiv.innerHTML = `‚ùå –û—à–∏–±–∫–∞: ${error.message}<br>–ö–æ–¥: ${error.status}<br>–î–µ—Ç–∞–ª–∏: ${JSON.stringify(error)}`;
                } else {
                    resultDiv.innerHTML = `‚úÖ –£—Å–ø–µ—à–Ω–æ! User ID: ${data.user?.id}<br>Email: ${data.user?.email}<br>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: ${data.user?.email_confirmed_at ? '–î–∞' : '–ù–µ—Ç'}`;
                }
            } catch (err) {
                console.error('–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:', err);
                resultDiv.innerHTML = `‚ùå –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: ${err.message}`;
            }
        }

        async function testSignIn() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.innerHTML = '–¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ö–æ–¥...';
            
            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Ö–æ–¥–∞:', { data, error });
                
                if (error) {
                    resultDiv.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ${error.message}`;
                } else {
                    resultDiv.innerHTML = `‚úÖ –í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! User ID: ${data.user?.id}`;
                }
            } catch (err) {
                console.error('–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:', err);
                resultDiv.innerHTML = `‚ùå –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: ${err.message}`;
            }
        }

        async function checkUser() {
            const resultDiv = document.getElementById('result');
            
            try {
                const { data: { user } } = await supabase.auth.getUser();
                
                if (user) {
                    resultDiv.innerHTML = `üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.email} (ID: ${user.id})`;
                } else {
                    resultDiv.innerHTML = `üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω`;
                }
            } catch (err) {
                console.error('–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:', err);
                resultDiv.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: ${err.message}`;
            }
        }
    </script>
</body>
</html>
